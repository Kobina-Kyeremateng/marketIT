webpackJsonp([118],{"/10a":function(e,t,r){"use strict";var a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-modal",{class:e.$style.modal,attrs:{id:"modalCancelSubscription",centered:"","hide-header":"","hide-footer":"",lazy:"","no-fade":!1}},[r("p",{staticClass:"text-secondary mb-6"},[e._v(e._s(e.$t("modals.survey.desc")))]),r("b-form",{class:e.$style.form,on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[r("div",{class:e.$style.baseStyle},[r("b-form-group",[r("b-form-radio-group",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{options:e.options,stacked:""},model:{value:e.form.report,callback:function(t){e.$set(e.form,"report",t)},expression:"form.report"}})],1),r("b-form-group",{staticClass:"mb-0",attrs:{label:"How can we improve Iconscout?"}},[r("b-form-textarea",{attrs:{placeholder:"Briefly describe reason",rows:2,"max-rows":5},model:{value:e.form.message,callback:function(t){e.$set(e.form,"message",t)},expression:"form.message"}})],1)],1),r("button",{class:["btn btn-primary btn-block mt-5",e.form.isLoading?e.form.loadingClass:""],attrs:{type:"submit"}},[e._v(e._s(e.$t("buttons.submit")))])])],1)},staticRenderFns:[]};t.a=a},EQt9:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("sxhg"),n=r("/10a");var s=function(e){this.$style=r("Y9vP")},o=r("VU/8")(a.a,n.a,!1,s,null,null);t.default=o.exports},HpPC:function(e,t,r){"use strict";var a=r("pFYg"),n=r.n(a),s=r("fZjL"),o=r.n(s),i=r("Xxa5"),l=r.n(i),u=r("exGp"),c=r.n(u),d=r("Zrlr"),m=r.n(d),f=r("wxAW"),p=r.n(f),v=r("mtWM"),h=r.n(v),b=r("ndvj"),g=function(){function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"disabled ajax-loading";for(var n in m()(this,e),this.isLoading=!1,this.loadingClass=a,this.originalData=t,t)this[n]=t[n];this.validator=r}return p()(e,[{key:"data",value:function(e){if("get"===e){var t={};for(var r in this.originalData)t[r]=this[r];return t}var a={};for(var n in this.originalData)a[n]=this[n];return a}},{key:"reset",value:function(){for(var e in this.originalData)this[e]=""}},{key:"post",value:function(e){return this.submit("post",e)}},{key:"put",value:function(e){return this.submit("put",e)}},{key:"patch",value:function(e){return this.submit("patch",e)}},{key:"delete",value:function(e){return this.submit("delete",e)}},{key:"submit",value:function(){var e=c()(l.a.mark(function e(t,r,a){var n,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.valid();case 2:if(!e.sent){e.next=25;break}return n=this.data(t),this.isLoading=!0,e.prev=5,e.next=8,h()({method:t,url:r,data:n});case 8:if("error"!==(s=e.sent).data.status){e.next=13;break}this.onError(s.data),e.next=15;break;case 13:return this.onSuccess(s.data),e.abrupt("return",s.data.response);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),this.onError(e.t0.response.data);case 20:return e.prev=20,this.isLoading=!1,e.finish(20);case 23:e.next=26;break;case 25:throw new Error("Validation Failed");case 26:case"end":return e.stop()}},e,this,[[5,17,20,23]])}));return function(t,r,a){return e.apply(this,arguments)}}()},{key:"valid",value:function(){var e=c()(l.a.mark(function e(){var t,r,a,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.validator.validateAll();case 2:return(t=e.sent)||(r=this.validator.errors,(a=document.querySelector('[data-vv-id="'+r.items[0].id+'"]'))&&a.scrollIntoViewIfNeeded(),n=o()(r)[0],b.a.alert({type:"danger",message:r[n][0].msg})),e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onSuccess",value:function(e){this.validator.reset(),this.isLoading=!1,null!==e.message&&b.a.alert({type:"success",message:e.message}),void 0!==e.redirect&&(window.location.href=e.redirect)}},{key:"onError",value:function(e){var t=e.elements,r=null;if(t){for(var a in t){var s=t[a];"object"===(void 0===s?"undefined":n()(s))&&(s=s[0]),this.validator.errors.add(a,s)}r=t[o()(t)[0]][0]}else r=e.message;throw b.a.alert({message:r}),new Error("Server Error")}},{key:"onFail",value:function(e){throw b.a.alert({type:"danger",message:e.message}),Error(e)}}]),e}();t.a=g},Y9vP:function(e,t,r){var a=r("ds6J");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,r("rjj0").default)("29bc8c88",a,!0,{sourceMap:!0})},ds6J:function(e,t,r){(t=e.exports=r("FZ+f")(!0)).push([e.i,".kmXZr_0 .modal-dialog{max-width:600px}.kmXZr_0 .modal-content{border-radius:3px}.kmXZr_0 .modal-body{padding:2.5rem}.kmXZr_0 ._4OyfR_0{max-width:500px}.kmXZr_0 ._3Gh1c_0{font-size:.875rem;color:#161a21}","",{version:3,sources:["/var/www/modals/survey/CancelSubscription.vue"],names:[],mappings:"AACA,uBACE,eAAiB,CAClB,AACD,wBACE,iBAAmB,CACpB,AACD,qBACE,cAAgB,CACjB,AACD,mBACE,eAAiB,CAClB,AACD,mBACE,kBAAoB,AACpB,aAAe,CAChB",file:"CancelSubscription.vue",sourcesContent:["\n.modal :global .modal-dialog {\n  max-width: 600px;\n}\n.modal :global .modal-content {\n  border-radius: 3px;\n}\n.modal :global .modal-body {\n  padding: 2.5rem;\n}\n.modal .form {\n  max-width: 500px;\n}\n.modal .baseStyle {\n  font-size: 0.875rem;\n  color: #161A21;\n}\n"],sourceRoot:""}]),t.locals={modal:"kmXZr_0",form:"_4OyfR_0",baseStyle:"_3Gh1c_0"}},sxhg:function(e,t,r){"use strict";var a=r("Xxa5"),n=r.n(a),s=r("exGp"),o=r.n(s),i=r("/C1n"),l=r("HpPC"),u=r("qeNL");t.a={mixins:[u.a],$_veeValidate:{validator:"new"},data:function(){return{visible:!1,options:["I am no longer using the service","Purchased subscription by mistake","Pricing is too high","Looking for more features to included","I find better alternative","Quality of service is not up to the mark","Other"],form:new l.a({report:null,message:null},this.$validator)}},methods:{onSubmit:function(){var e=o()(n.a.mark(function e(){var t,r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.user.subscriptions[0].uuid,r=Object(i.c)("v2.auth.subscriptions.cancel.report",{subscription:t}),e.prev=2,e.next=5,this.form.post(r);case 5:if(!e.sent){e.next=8;break}this.$root.$emit("bv::hide::modal","modalCancelSubscription"),window.location.reload(!0);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}},e,this,[[2,10]])}));return function(){return e.apply(this,arguments)}}()}}}});